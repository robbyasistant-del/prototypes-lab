<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Word Merge Daily ‚Äî Prototype</title>
  <style>
    :root{--bg:#0b1020;--card:#121a31;--soft:#1b2747;--acc:#67e8f9;--acc2:#f59e0b;--ok:#34d399;--bad:#f87171;--text:#e6ecff}
    *{box-sizing:border-box} body{margin:0;font-family:Inter,Segoe UI,Arial;background:linear-gradient(160deg,#0a0f1d,#111b35);color:var(--text)}
    .app{max-width:980px;margin:0 auto;padding:20px}
    .top{display:flex;justify-content:space-between;gap:12px;align-items:center;margin-bottom:14px}
    .pill{padding:8px 12px;background:#1c2a4d;border:1px solid #2e4272;border-radius:999px;font-size:12px}
    .card{background:var(--card);border:1px solid #2a3d6f;border-radius:16px;padding:18px;box-shadow:0 8px 30px #00000055}
    h1,h2,h3{margin:0 0 8px} .muted{opacity:.82}
    .row{display:flex;gap:12px;flex-wrap:wrap} .grow{flex:1;min-width:260px}
    button{border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn{background:#314a86;color:#fff}.btn2{background:#1f2f58;color:#c9d8ff}.cta{background:linear-gradient(90deg,#22d3ee,#3b82f6);color:#03112e}
    .view{display:none}.view.active{display:block}
    .tiles{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;max-width:420px}
    .t{background:var(--soft);border:1px solid #3b548f;border-radius:12px;padding:12px;text-align:center;font-weight:800}
    .center{background:#5b3a00;border-color:#9a680c;color:#ffd484}
    input{width:100%;padding:12px;border-radius:12px;border:1px solid #3e5b98;background:#0f1730;color:#fff}
    .meter{height:10px;background:#0c1327;border-radius:99px;overflow:hidden;border:1px solid #294174}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#22d3ee,#34d399)}
    .status{padding:10px;border-radius:10px;background:#0f1730;border:1px solid #274173;min-height:42px}
    .good{color:var(--ok)} .bad{color:var(--bad)}
    .share{background:#0f1830;border:1px dashed #46619f;border-radius:12px;padding:10px;white-space:pre-wrap}
    a{color:#a6d9ff}
  </style>
</head>
<body>
<div class="app">
  <div class="top">
    <div class="pill">Prototype Factory ¬∑ 2026-02-26</div>
    <div class="pill">Mode: Daily Puzzle + Streak</div>
  </div>

  <div class="card view active" id="home">
    <h1>Word Merge Daily</h1>
    <p class="muted">Merge letter fragments into valid words, chain combos, and finish the daily objective in 90 seconds.</p>
    <div class="row" style="margin-top:12px">
      <button class="cta" onclick="go('game')">Play Daily Challenge</button>
      <button class="btn2" onclick="go('help')">How to play</button>
      <button class="btn2" onclick="go('rewards')">Rewards & streak</button>
    </div>
    <p style="margin-top:14px"><a href="./report.html">Open detailed report</a> ¬∑ <a href="../index.html">Back to catalog</a></p>
  </div>

  <div class="card view" id="help">
    <h2>How to play</h2>
    <ol>
      <li>Use only letters in the ring, center letter is mandatory.</li>
      <li>Build 3+ letter words. Longer words give combo multipliers.</li>
      <li>Reach <b>4 valid words</b> before timer hits zero.</li>
      <li>Win grants coins + streak flame. Miss one day and streak freezes for 24h rescue.</li>
    </ol>
    <button class="btn" onclick="go('home')">Back</button>
  </div>

  <div class="card view" id="rewards">
    <h2>Rewards & progression</h2>
    <ul>
      <li>Daily win: +25 coins</li>
      <li>Streak bonus: +10 x streak day</li>
      <li>3-day streak unlocks ‚ÄúGolden Tile‚Äù visual theme</li>
      <li>Social trigger: share score card + streak flame emoji line</li>
    </ul>
    <button class="btn" onclick="go('home')">Back</button>
  </div>

  <div class="card view" id="game">
    <div class="row">
      <div class="grow">
        <h2>Daily Board</h2>
        <div class="tiles" id="rack"></div>
        <p class="muted" style="margin:8px 0 0">Center letter is mandatory for every word.</p>
      </div>
      <div class="grow">
        <h3>Session</h3>
        <p id="hud">Timer 90s ¬∑ Words 0/4 ¬∑ Combo x1 ¬∑ Score 0</p>
        <div class="meter"><div class="bar" id="pbar"></div></div>
        <div style="margin-top:10px"><input id="word" placeholder="Type your word and press Submit" maxlength="12"/></div>
        <div class="row" style="margin-top:10px">
          <button class="cta" onclick="submitWord()">Submit</button>
          <button class="btn2" onclick="resetGame()">Reset run</button>
          <button class="btn2" onclick="go('home')">Exit</button>
        </div>
        <div class="status" id="status" style="margin-top:10px"></div>
      </div>
    </div>
  </div>

  <div class="card view" id="win">
    <h2>üèÜ Daily Cleared</h2>
    <p id="winTxt"></p>
    <div class="share" id="share"></div>
    <div class="row" style="margin-top:10px"><button class="cta" onclick="go('home')">Home</button><button class="btn" onclick="copyShare()">Copy share text</button></div>
  </div>

  <div class="card view" id="lose">
    <h2>‚è± Time up</h2>
    <p id="loseTxt"></p>
    <div class="row"><button class="cta" onclick="go('game');resetGame()">Try again</button><button class="btn2" onclick="go('home')">Home</button></div>
  </div>
</div>

<script>
const views=['home','help','rewards','game','win','lose'];
const letters=['A','R','L','N','T','S']; const center='E';
const valid=['EARN','LEAN','LENS','NEAR','TEAR','EATS','SEAL','LATE','RATE','TEAL','SNARE','LEARN'];
let timer=90, words=0, score=0, combo=1, streak=4, tInt=null;
function go(v){views.forEach(id=>document.getElementById(id).classList.remove('active'));document.getElementById(v).classList.add('active');if(v==='game'&&!tInt)start();}
function drawRack(){const el=document.getElementById('rack');el.innerHTML='';letters.forEach(l=>el.innerHTML+=`<div class='t'>${l}</div>`);el.innerHTML+=`<div class='t center'>${center}</div>`;}
function start(){clearInterval(tInt);tInt=setInterval(()=>{timer--;refresh();if(timer<=0)finish(false);},1000);}
function refresh(){document.getElementById('hud').textContent=`Timer ${timer}s ¬∑ Words ${words}/4 ¬∑ Combo x${combo} ¬∑ Score ${score}`;document.getElementById('pbar').style.width=Math.min(100,(words/4)*100)+'%';}
function msg(txt,ok){const s=document.getElementById('status');s.innerHTML=`<span class='${ok?'good':'bad'}'>${txt}</span>`;}
function allowed(w){return [...w].every(c=>c===center||letters.includes(c));}
function submitWord(){const w=(document.getElementById('word').value||'').trim().toUpperCase();if(w.length<3||!w.includes(center)||!allowed(w)){combo=1;msg('Invalid word pattern for this board.',false);refresh();return;}if(!valid.includes(w)){combo=1;msg('Not in today\'s accepted list.',false);refresh();return;}words++;score+=w.length*10*combo;combo=Math.min(5,combo+1);msg(`Great! ${w} accepted.`,true);document.getElementById('word').value='';refresh();if(words>=4)finish(true);}
function finish(win){clearInterval(tInt);tInt=null;if(win){const reward=25+(streak*10);document.getElementById('winTxt').textContent=`Score ${score}. Reward +${reward} coins. Streak kept: ${streak+1} days.`;document.getElementById('share').textContent=`Word Merge Daily\nScore: ${score}\nWords: ${words}/4\nStreak: ${streak+1}üî•`;go('win');}else{document.getElementById('loseTxt').textContent=`You reached ${words}/4 words with score ${score}.`;go('lose');}}
function resetGame(){timer=90;words=0;score=0;combo=1;document.getElementById('word').value='';msg('Run reset. Go!',true);refresh();if(!tInt)start();}
function copyShare(){navigator.clipboard?.writeText(document.getElementById('share').textContent);}
drawRack();refresh();
</script>
</body>
</html>